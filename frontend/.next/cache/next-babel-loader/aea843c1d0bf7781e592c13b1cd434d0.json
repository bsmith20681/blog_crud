{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar _jsxFileName = \"D:\\\\blog_crud\\\\frontend\\\\src\\\\components\\\\auth\\\\SigninComponent.js\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { useState } from 'react';\nimport { signin, authenticate } from '../../../actions/auth';\nimport Router from 'next/router';\n\nconst SigninComponent = () => {\n  const {\n    0: values,\n    1: setValues\n  } = useState({\n    email: '',\n    password: '',\n    error: '',\n    loading: false,\n    message: '',\n    showForm: false\n  });\n  const {\n    email,\n    password,\n    error,\n    loading,\n    message,\n    showForm\n  } = values;\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    console.log('handingl submit');\n    setValues(_objectSpread({}, values, {\n      loading: true,\n      error: false\n    }));\n    const user = {\n      email,\n      password\n    };\n    signin(user).then(data => {\n      if (data.error) {\n        setValues(_objectSpread({}, values, {\n          error: data.error\n        }));\n      } else {\n        authenticate(data, () => {\n          Router.push(\"/\");\n        });\n      }\n    });\n  };\n\n  const handleChange = name => e => {\n    setValues(_objectSpread({}, values, {\n      error: false,\n      [name]: e.target.value\n    }));\n  };\n\n  const showLoading = () => loading ? __jsx(\"div\", {\n    className: \"alert alert-info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40\n    },\n    __self: this\n  }, \" Loading... \") : '';\n\n  const showError = () => error ? __jsx(\"div\", {\n    className: \"alert alert-danger\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41\n    },\n    __self: this\n  }, error) : '';\n\n  const showMessage = () => message ? __jsx(\"div\", {\n    className: \"alert alert-info\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 42\n    },\n    __self: this\n  }, \" \", message, \" \") : '';\n\n  const signinForm = () => {\n    return __jsx(\"div\", {\n      class: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, __jsx(\"form\", {\n      onSubmit: handleSubmit,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 48\n      },\n      __self: this\n    }, __jsx(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 49\n      },\n      __self: this\n    }, __jsx(\"input\", {\n      value: email,\n      onChange: handleChange('email'),\n      type: \"email\",\n      className: \"form-control\",\n      placeholder: \"Type your email\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    })), __jsx(\"div\", {\n      className: \"form-group\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, __jsx(\"input\", {\n      value: password,\n      onChange: handleChange('password'),\n      type: \"password\",\n      className: \"form-control\",\n      placeholder: \"Type your password\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    })), __jsx(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, __jsx(\"button\", {\n      class: \"btn btn-primary\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, \"Sign Up\"))));\n  };\n\n  return __jsx(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, showError(), showLoading(), showMessage(), __jsx(\"h1\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, \"This is the sign in page\"), signinForm());\n};\n\nexport default SigninComponent;","map":{"version":3,"sources":["D:/blog_crud/frontend/src/components/auth/SigninComponent.js"],"names":["useState","signin","authenticate","Router","SigninComponent","values","setValues","email","password","error","loading","message","showForm","handleSubmit","e","preventDefault","console","log","user","then","data","push","handleChange","name","target","value","showLoading","showError","showMessage","signinForm"],"mappings":"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","sourcesContent":["import {useState} from 'react'\r\nimport {signin, authenticate} from '../../../actions/auth'\r\nimport Router from 'next/router'\r\n\r\nconst SigninComponent = () => {\r\n  const [values, setValues] = useState({\r\n    email: '',\r\n    password: '',\r\n    error: '',\r\n    loading: false,\r\n    message: '',\r\n    showForm: false\r\n   })\r\n\r\n  const {email, password, error, loading, message, showForm} = values\r\n\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n    console.log('handingl submit')\r\n    setValues({...values, loading: true, error: false})\r\n    const user = {email, password}\r\n\r\n    signin(user)\r\n    .then(data => {\r\n      if(data.error) {\r\n        setValues({...values, error: data.error})\r\n      } else {\r\n        authenticate(data, () => {\r\n          Router.push(`/`)\r\n        })\r\n      }\r\n    })\r\n  }\r\n\r\n  const handleChange = name => e => {\r\n    setValues({...values, error: false, [name]: e.target.value})\r\n  }\r\n\r\n  const showLoading = () => (loading ? <div className=\"alert alert-info\"> Loading... </div> : '');\r\n  const showError = () => (error ? <div className=\"alert alert-danger\">{error}</div> : '');\r\n  const showMessage = () => (message ? <div className=\"alert alert-info\"> {message} </div> : '');\r\n\r\n\r\n  const signinForm = () => {\r\n    return(\r\n      <div class=\"container\">\r\n        <form onSubmit={handleSubmit}>\r\n          <div className=\"form-group\">\r\n            <input value={email} onChange={handleChange('email')} type=\"email\" className=\"form-control\" placeholder=\"Type your email\"/>\r\n          </div>\r\n\r\n          <div className=\"form-group\">\r\n            <input value={password} onChange={handleChange('password')} type=\"password\" className=\"form-control\" placeholder=\"Type your password\"/>\r\n          </div>\r\n\r\n          <div>\r\n            <button class=\"btn btn-primary\">Sign Up</button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    )\r\n  }\r\n\r\n  return (\r\n    <React.Fragment>\r\n      {showError()}\r\n      {showLoading()}\r\n      {showMessage()}\r\n      <h1>This is the sign in page</h1>\r\n      {signinForm()}\r\n    </React.Fragment>\r\n  )\r\n}\r\n\r\nexport default SigninComponent\r\n"]},"metadata":{},"sourceType":"module"}